(function(){var d,g,k,i,o,m,l=function(){};l.__name__=!0;l.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};l.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};var j=function(){};j.__name__=!0;j.main=function(){try{j.checkJSScriptDepenencies()}catch(a){if(g.__instanceof(a,String)){i.trace("Error setting up - missing one or more JS script dependencies",{fileName:"Main.hx",lineNumber:55,
className:"Main",methodName:"main",customParams:["error"]});i.trace(a,{fileName:"Main.hx",lineNumber:56,className:"Main",methodName:"main",customParams:["error"]});return}throw a;}i.trace=function(a,c){var f=null!=c&&null!=c.customParams?c.customParams[0]:null;"warn"!=f&&("info"!=f&&"debug"!=f&&"error"!=f)&&(f=null==c?"error":"log");("info"==f||"error"==f||"warning"==f)&&o.trace(a,c)};new $(function(){var a=j.getScriptSrcParameters("mbp_rectanglePacker"),c=j.getParameter("container",a,"div#rectContainer"),
f=h.parseInt(j.getParameter("xCellSize",a)),e=h.parseInt(j.getParameter("yCellSize",a)),s=h.parseInt(j.getParameter("padX",a)),a=h.parseInt(j.getParameter("padY",a));new d.rectanglepacking.Packer(c,f,e,s,a)})};j.checkJSScriptDepenencies=function(){"undefined"===typeof console&&(console={log:function(){},debug:function(){},warn:function(){},error:function(){},info:function(){}});var a=!1;if(a="undefined"===typeof window.jQuery)throw"jQuery not found";};j.getParameter=function(a,b,c){for(var f=0,e=
b.length;f<e;){var d=f++;if(b[d].name==a)return b[d].value}return c};j.getScriptSrcParameters=function(a){for(var a=(new $("script[data*="+a+"]")).attr("src"),a=l.substr(a,a.indexOf("?")+1,null).split("&"),b,c=[],f=0,e=a.length;f<e;){var d=f++;b=a[d].split("=");c[d]=new p(b[0],b[1])}return c};var p=function(a,b){this.name=a;this.value=b};p.__name__=!0;p.prototype={__class__:p};var h=function(){};h.__name__=!0;h.string=function(a){return g.__string_rec(a,"")};h.parseInt=function(a){var b=parseInt(a,
10);if(0==b&&(120==l.cca(a,1)||88==l.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};h.parseFloat=function(a){return parseFloat(a)};m=o=i=void 0;o=function(){};o.__name__=!0;o.trace=function(a,b){var c=null!=b&&null!=b.customParams?b.customParams[0]:null;"warn"!=c&&("info"!=c&&"debug"!=c&&"error"!=c)&&(c=null==b?"error":"log");console[c]((null==b?"":b.fileName+":"+b.lineNumber+" : ")+h.string(a))};i=function(){};i.__name__=!0;i.trace=function(a,b){g.__trace(a,b)};m=function(a){var b=this;this.id=
window.setInterval(function(){b.run()},a)};m.__name__=!0;m.delay=function(a,b){var c=new m(b);c.run=function(){c.stop();a()};return c};m.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},__class__:m};k=g=void 0;g=function(){};g.__name__=!0;g.__unhtml=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};g.__trace=function(a,b){var c=null!=b?b.fileName+":"+b.lineNumber+": ":"",c=c+g.__string_rec(a,""),f;
"undefined"!=typeof document&&null!=(f=document.getElementById("haxe:trace"))?f.innerHTML+=g.__unhtml(c)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(c)};g.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",f=2,e=a.length;f<e;)var d=f++,c=2!=d?c+(","+g.__string_rec(a[d],
b)):c+g.__string_rec(a[d],b);return c+")"}f=a.length;c="[";b+="\t";for(e=0;e<f;)d=e++,c+=(0<d?",":"")+g.__string_rec(a[d],b);return c+"]"}try{e=a.toString}catch(i){return"???"}if(null!=e&&e!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;e=null;c="{\n";b+="\t";f=null!=a.hasOwnProperty;for(e in a)if(!f||a.hasOwnProperty(e))"prototype"==e||("__class__"==e||"__super__"==e||"__interfaces__"==e||"__properties__"==e)||(2!=c.length&&(c+=", \n"),c+=b+e+" : "+g.__string_rec(a[e],b));b=b.substring(1);
return c+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};g.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var f=0,e=c.length;f<e;){var d=f++,d=c[d];if(d==b||g.__interfLoop(d,b))return!0}return g.__interfLoop(a.__super__,b)};g.__instanceof=function(a,b){try{if(a instanceof b)return b==Array?null==a.__enum__:!0;if(g.__interfLoop(a.__class__,b))return!0}catch(c){if(null==b)return!1}switch(b){case t:return Math.ceil(a%
2147483648)===a;case q:return"number"==typeof a;case r:return!0===a||!1===a;case String:return"string"==typeof a;case u:return!0;default:if(null==a)return!1;if(b==v&&null!=a.__name__)return!0;null;if(b==w&&null!=a.__ename__)return!0;null;return a.__enum__==b}};k=function(){};k.__name__=!0;d=void 0;d={rectanglepacking:{}};d.rectanglepacking.Packer=function(a,b,c,f,e){null==e&&(e=8);null==f&&(f=8);null==c&&(c=8);null==b&&(b=8);var g=this;this.xCellSize=b;this.yCellSize=c;this.padX=f;this.padY=e;1>b&&
(b=1);1>c&&(c=1);this.tempPt=new d.rectanglepacking.geom.Point;this.container=new $(a);this.outerBounds=d.rectanglepacking.Packer.getDomElementBounds(this.container[0]);this.fixedElements=new $(a+" div.fixedElement");this.packableElements=new $(a+" div.packableElement");this.packables=[];this.packableElements.each(function(a,b){g.packables.push(new d.rectanglepacking.Packable(a,b))});this.fixedPositions=[];this.fixedElements.each(function(a,b){g.fixedPositions[a]=d.rectanglepacking.Packer.getDomElementBounds(b)});
this.packableElements.css("display","none");this.prepare();this.fixedElements.remove();0<this.packables.length?this.packItem(0):i.trace("Nothing to pack...?",{fileName:"Packer.hx",lineNumber:121,className:"madebypi.util.rectanglepacking.Packer",methodName:"new",customParams:["warn"]})};d.rectanglepacking.Packer.__name__=!0;d.rectanglepacking.Packer.getDomElementBounds=function(a){var a=new $(a),b=h.parseFloat(a.css("top")),c=h.parseFloat(a.css("left"));Math.isNaN(b)&&(b=0);Math.isNaN(c)&&(c=0);return new d.rectanglepacking.geom.Rectangle(c,
b,h.parseFloat(a.width()),h.parseFloat(a.height()))};d.rectanglepacking.Packer.prototype={sortPackableItemsByArea:function(){for(var a=[],b=this.packables.length,c=0;c<b;){var d=c++;a.push({index:d,area:this.packables[d].rect.get_area()})}a.sort(function(a,b){return a.area>b.area?-1:a.area<b.area?1:0});this.areaSortedIndices=[];for(c=0;c<b;)d=c++,this.areaSortedIndices[d]=a[d].index},findSpace:function(a,b){b.inflate(this.padX,this.padY);for(var c=Math.round(this.outerBounds.width/this.xCellSize),
f=Math.round(this.outerBounds.height/this.yCellSize),e=0,g=0,h=0,g=0,j=this.fixedPositions.length,m=!1,k=this.outerBounds.width*this.outerBounds.height,e=!1,l=new d.rectanglepacking.geom.Rectangle,n,k=k*k,o=0;o<c;){h=o++*this.xCellSize;b.x=h;for(var p=0;p<f;){g=p++;e=!1;g*=this.yCellSize;b.y=g;if(b.get_bottom()<=this.outerBounds.get_bottom())for(var q=0;q<j;)n=this.fixedPositions[q++],e=e||((n.get_right()>b.get_right()?b.get_right():n.get_right())<=(n.x<b.x?b.x:n.x)?!1:(n.get_bottom()>b.get_bottom()?
b.get_bottom():n.get_bottom())>(n.y<b.y?b.y:n.y));else e=!0;e||(m=!0,this.tempPt.x=h,this.tempPt.y=g,e=a.x-this.tempPt.x,g=a.y-this.tempPt.y,e=e*e+g*g,e<k&&(k=e,l.x=b.x,l.y=b.y,l.width=b.width,l.height=b.height))}}if(!m)return i.trace("I'm sorry, I can't place that Dave.",{fileName:"Packer.hx",lineNumber:288,className:"madebypi.util.rectanglepacking.Packer",methodName:"findSpace"}),null;l.inflate(-this.padX,-this.padY);return l},packComplete:function(){i.trace("Packing completed!",{fileName:"Packer.hx",
lineNumber:211,className:"madebypi.util.rectanglepacking.Packer",methodName:"packComplete",customParams:["info"]});for(var a=0,b=0,c=this.packables.length;b<c;)this.packables[b++].packed&&a++;i.trace("Packed "+a+" of a possible "+this.packables.length+" rectangles",{fileName:"Packer.hx",lineNumber:215,className:"madebypi.util.rectanglepacking.Packer",methodName:"packComplete",customParams:["info"]})},packItem:function(a){var b=this,c=null,f=(new Date).getTime(),e=this.packables[this.areaSortedIndices[a]];
!e.packed&&!e.unpackable&&(c=this.findSpace(this.targetPoint,e.rect.clone()),null==c?(i.trace("Out of space! Can't place item "+e.index+" "+h.string((new $(e.element)).html()),{fileName:"Packer.hx",lineNumber:171,className:"madebypi.util.rectanglepacking.Packer",methodName:"packItem",customParams:["info"]}),e.unpackable=!0,(new $(e.element)).remove()):(i.trace("Placing item "+e.index+" at "+c.toString(),{fileName:"Packer.hx",lineNumber:177,className:"madebypi.util.rectanglepacking.Packer",methodName:"packItem"}),
e.packed=!0,this.fixedPositions.push(c),(new $(e.element)).css("left",c.x).css("top",c.y).css("display","block").removeClass("packableElement").addClass("packedElement")));c=(new Date).getTime()-f;i.trace("Took "+c+"ms to pack rect",{fileName:"Packer.hx",lineNumber:192,className:"madebypi.util.rectanglepacking.Packer",methodName:"packItem"});a++;a==this.packables.length?this.packComplete():c>d.rectanglepacking.Packer.MAX_PACK_TIME?m.delay(function(){b.packItem(a)},d.rectanglepacking.Packer.MAX_PACK_TIME):
this.packItem(a)},prepare:function(){var a=new $("div#fixed-master.fixedElement");0==a.length?(i.trace("#fixed-master not found in .fixedElement items. Using the container instead...",{fileName:"Packer.hx",lineNumber:136,className:"madebypi.util.rectanglepacking.Packer",methodName:"prepare",customParams:["info"]}),a=this.outerBounds.clone()):a=d.rectanglepacking.Packer.getDomElementBounds(a[0]);this.sortPackableItemsByArea();this.targetPoint=new d.rectanglepacking.geom.Point(a.x+a.width/2,a.y+a.height/
2)},__class__:d.rectanglepacking.Packer};d.rectanglepacking.Packable=function(a,b){this.packed=this.unpackable=!1;this.element=b;this.index=a;this.rect=d.rectanglepacking.Packer.getDomElementBounds(b);(new $(b)).attr("id","packable_"+a)};d.rectanglepacking.Packable.__name__=!0;d.rectanglepacking.Packable.prototype={__class__:d.rectanglepacking.Packable};d.rectanglepacking.geom={};d.rectanglepacking.geom.Point=function(a,b){this.x=null==a?0:a;this.y=null==b?0:b};d.rectanglepacking.geom.Point.__name__=
!0;d.rectanglepacking.geom.Point.prototype={__class__:d.rectanglepacking.geom.Point};d.rectanglepacking.geom.Rectangle=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d};d.rectanglepacking.geom.Rectangle.__name__=!0;d.rectanglepacking.geom.Rectangle.prototype={inflate:function(a,b){this.x-=a;this.width+=2*a;this.y-=b;this.height+=2*b},clone:function(){return new d.rectanglepacking.geom.Rectangle(this.x,this.y,this.width,this.height)},
get_bottomRight:function(){return new d.rectanglepacking.geom.Point(this.x+this.width,this.y+this.height)},get_size:function(){return new d.rectanglepacking.geom.Point(this.width,this.height)},get_topLeft:function(){return new d.rectanglepacking.geom.Point(this.x,this.y)},get_bottom:function(){return this.y+this.height},get_top:function(){return this.y},get_right:function(){return this.x+this.width},get_left:function(){return this.x},get_area:function(){return this.width*this.height},toString:function(){return"[Rectangle x:"+
this.x+", y:"+this.y+", w:"+this.width+", h:"+this.height+"]"},__class__:d.rectanglepacking.geom.Rectangle};Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=String;String.__name__=!0;Array.prototype.__class__=Array;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var t={__name__:["Int"]},
u={__name__:["Dynamic"]},q=Number;q.__name__=["Float"];var r=Boolean;r.__ename__=["Bool"];var v={__name__:["Class"]},w={};if(!window.XMLHttpRequest&&!window.ActiveXObject)throw"Unable to create XMLHttpRequest object.";"undefined"!=typeof document&&(k.document=document);"undefined"!=typeof window&&(k.window=window,k.window.onerror=function(a,b,c){var d=k.onerror;return d==null?false:d(a,[b+":"+c])});d.rectanglepacking.Packer.MAX_PACK_TIME=40;j.main()})();
